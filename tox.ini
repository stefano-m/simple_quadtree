[tox]
minversion = 2.3
envlist = py27,py35
src = {toxinidir}/src
target = {toxinidir}/target
toxworkdir = {[tox]target}/tox
min_coverage = 95

[testenv]
deps = -rtest-requirements.txt
changedir = {[tox]target}
whitelist_externals =
                    /bin/rm
                    /usr/bin/rm
                    /bin/cp
                    /usr/bin/cp
commands =
         flake8 {[tox]src}/quadtree.py
         rm -rf {[tox]target}/tests
         cp -a {toxinidir}/tests {[tox]target}
         py.test --cov=quadtree --cov-config={toxinidir}/.coveragerc --cov-fail-under={[tox]min_coverage} {[tox]target}/tests

[tox:travis]
2.7 = py27
3.5 = py35, codecov

[testenv:codecov]
basepython = python3
changedir = {toxinidir}
passenv =
        CI
        TRAVIS_BUILD_ID
        TRAVIS TRAVIS_BRANCH
        TRAVIS_JOB_NUMBER
        TRAVIS_PULL_REQUEST
        TRAVIS_JOB_ID
        TRAVIS_REPO_SLUG
        TRAVIS_COMMIT
deps =
     coverage==4.0.3
     requests==2.9.1
     codecov==1.6.3
commands = codecov -X gcov -e TOXENV

[testenv:py35]
commands =
         {[testenv]commands}
         python -m doctest {toxinidir}/README.rst

[testenv:py2-dev]
basepython = python2
usedevelop = true
commands =

[testenv:py3-dev]
basepython = python3
usedevelop = true
commands =

[flake8]
